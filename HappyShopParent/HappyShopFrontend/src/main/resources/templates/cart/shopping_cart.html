<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">

<head th:replace="fragments :: page_head('Shopping Cart','none')"></head>
<body>

	<div class="container-fluid">
		<div th:replace="navigation :: header_menu"></div>
		<h1 class="text-center">Your Shopping Cart</h1>
		
		<div class="row">
			<div class="col-md-9">
				<th:block th:each="cartItem,status : ${listCartItem}">
					<div class="row border border-secondary p-3 m-3" th:with="product = ${cartItem.product}">
						<div class="col-md-1">
							[[${status.count}]]
						</div>
						<div class="col-md-3">
							<img th:src="@{${product.getProductMainImagePath}}" class="img-fluid"
								style="width: 200px; height: 200px;"/>
						</div>
						<div class="col-md-8">
							<h5><a th:href="@{'/p/' + ${product.alias}}" th:text="${product.shortName}"></a></h5>
							<div class="mt-3"
								th:replace="cart/quantity_control :: content(${cartItem.quantity},${cartItem.product.quantity},${cartItem.product.id})">
							</div>
							<div class="mt-2 d-flex flex-row" style="font-size: 18px">
								<p class="me-3">Unit Price:</p>
								<div th:replace="product/product_fragment :: showProductPrice"></div>
							</div>
							<div class="d-flex flex-row" style="font-size: 20px;">
								Total:&nbsp; 								
								<div th:replace="product/product_fragment :: productPriceForm(${cartItem.getSubTotal})" ></div>
							</div>
						</div>
					</div>
				</th:block>
			</div>
			<div class="col-md m-3" style="font-size: 20px;">
				<b class="text-info">Estimated Total: </b>
				<div  th:replace="product/product_fragment :: productPriceForm(${estimatedTotal})">
				</div>
				<button class="btn btn-danger mt-3">Check Out</button>
			</div>
		</div>


		<div th:replace="navigation :: footer_menu"></div>
		<div th:replace="fragments :: footer"></div>
	</div>
	<script>
	
	</script>
	<script th:src="@{/js/cart_quantity_control.js}"></script>
	<script
		src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.5/dist/umd/popper.min.js"
		integrity="sha384-Xe+8cL9oJa6tN/veChSP7q+mnSPaj5Bcu9mPX5F5xIGE0DVittaqT5lorf0EI7Vk"
		crossorigin="anonymous"></script>

	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.min.js"
		integrity="sha384-kjU+l4N0Yf4ZOJErLsIcvOU2qSb74wXpOhqTvwVx3OElZRweTnQ6d31fXEoRD1Jy"
		crossorigin="anonymous"></script>
</body>
</html>
